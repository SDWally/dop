# 回测系统设计

## 主要模块

- data 数据源及数据处理
- model 回测引擎部分
- mod 可选模块组
- service 服务化接口
- utils 工具

## 回测引擎部分的核心类设计

- Context 上下文类（回测及交易上下文）
- Instruct 指令类（下单指令）
- Clear 清算类（开盘收盘清算）
- Executor 引擎执行类（）
- Indicator 结果指标类

- 资产模板类（资产属性，资产持有调整）
- 资产组合模板类（分红配股调整，买单结算，卖单结算， 组合持仓信息）
- 订单类
- 账户类

- 历史持仓表
- 历史账户表
- 成交记录表
- 订单记录表
- 收益指标表
- 现金转账表 

## 基于事件驱动模型

- 针对每个交易日，迭代
- 盘前数据刷新，结算
- 执行 context.events 事件序列 (run_time, run_func, specific_time)
- 盘后数据刷新 结算

## 常量

- 资产类型（股票 现金 指数 期货 股指期货）
- 资产类型组（股票 指数 期货 股指期货）
- 订单类型（市价单 限价单 指定价格、大宗交易单）
- 订单方向（开仓 平仓）

## Clear

- 持仓价格更新
- 盘前调整
- 盘后调整，账户表存档，持仓表存档
- 回测整个结束的调整   

## 配置项

## 
